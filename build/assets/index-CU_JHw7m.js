const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StudentDashboard-CP0T31it.js","assets/ui-components-B_QGTPpA.js","assets/vendor-Ko1KMr1j.js","assets/checkbox-CPvGMPaq.js","assets/StudentDashboard-se7re9nv.css","assets/AdminDashboard-hIJIKb87.js"])))=>i.map(i=>d[i]);
import{j as e,A as D,G as K,P as H,M as I,a as X,C as y,L as N,K as Q,b as k,c as F,d as U,e as Y,f as Z,g as ee,h as se,i as te,k as re,l as L,I as E,B as ae}from"./ui-components-B_QGTPpA.js";import{a as ne,d as oe,r as o}from"./vendor-Ko1KMr1j.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const l of u.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(a){if(a.ep)return;a.ep=!0;const u=r(a);fetch(a.href,u)}})();var M,_=ne;M=_.createRoot,_.hydrateRoot;const ie="modulepreload",le=function(s){return"/app-bateau-client/"+s},z={},O=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),h=l?.nonce||l?.getAttribute("nonce");a=Promise.allSettled(r.map(d=>{if(d=le(d),d in z)return;z[d]=!0;const x=d.endsWith(".css"),p=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const m=document.createElement("link");if(m.rel=x?"stylesheet":ie,x||(m.as="script"),m.crossOrigin="",m.href=d,h&&m.setAttribute("nonce",h),document.head.appendChild(m),x)return new Promise((c,i)=>{m.addEventListener("load",c),m.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${d}`)))})}))}function u(l){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=l,window.dispatchEvent(h),!h.defaultPrevented)throw l}return a.then(l=>{for(const h of l||[])h.status==="rejected"&&u(h.reason);return t().catch(u)})},V="https://libertyloc-backend-production-2615.up.railway.app/api";console.log("ðŸŒ API URL configurÃ©e:",V);console.log("ðŸ”§ Mode:","PRODUCTION");const j=oe.create({baseURL:V,withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:15e3});j.interceptors.request.use(s=>{const t=localStorage.getItem("auth_token");return t&&s.headers&&(s.headers.Authorization=`Bearer ${t}`),console.log(`ðŸ“¤ ${s.method?.toUpperCase()} ${s.url}`,{headers:s.headers,data:s.data}),s},s=>(console.error("âŒ Erreur requÃªte:",s),Promise.reject(s)));j.interceptors.response.use(s=>(console.log(`âœ… ${s.config.method?.toUpperCase()} ${s.config.url}`,{status:s.status,data:s.data}),s),s=>(console.error("âŒ Erreur rÃ©ponse:",{status:s.response?.status,message:s.response?.data?.message,url:s.config?.url}),s.response?.status===401&&(console.warn("âš ï¸ Token invalide - DÃ©connexion"),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.pathname.includes("/")||(window.location.href="/")),Promise.reject({message:s.response?.data?.message||s.message||"Une erreur est survenue",status:s.response?.status,originalError:s})));const Le={AUDIO_BASE_URL:"",getAudioUrl:s=>s?s.startsWith("http://")||s.startsWith("https://")?s:s.startsWith("sounds/")?`https://iam-mickael.me/app-bateau-client/${s}`:`/${s}`:null};class ce{async login(t){const{data:r}=await j.post("/auth/login",t);if(r.success){const n={token:r.token,user:r.user};return localStorage.setItem("auth_token",n.token),localStorage.setItem("user_data",JSON.stringify(n.user)),n}throw new Error(r.message||"Erreur de connexion")}async verifyToken(){const{data:t}=await j.get("/auth/verify"),r=t.user||t.data?.user;if(t.success&&r)return localStorage.setItem("user_data",JSON.stringify(r)),r;throw new Error("Token invalide")}async updateFirstLogin(){const{data:t}=await j.put("/auth/first-login");if(t.success){const r=this.getCurrentUser();r&&(r.firstLogin=!1,localStorage.setItem("user_data",JSON.stringify(r)))}}async changePassword(t){const{data:r}=await j.put("/auth/change-password",t);if(!r.success)throw new Error(r.message||"Erreur lors du changement de mot de passe")}async createUser(t){const r={email:t.email,name:t.name,password:"student123",role:"student",activation_start_date:t.activation_start_date,activation_weeks:t.activation_weeks},{data:n}=await j.post("/auth/register",r);if(n.success)return n.user||n.data;throw new Error(n.message||"Erreur lors de la crÃ©ation de l'utilisateur")}logout(){localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.href="/app-bateau-client"}getCurrentUser(){const t=localStorage.getItem("user_data");return t?JSON.parse(t):null}isAuthenticated(){return!!localStorage.getItem("auth_token")}isAdmin(){return this.getCurrentUser()?.role==="admin"}getToken(){return localStorage.getItem("auth_token")}}const v=new ce,q=o.createContext(void 0),de=({children:s})=>{const[t,r]=o.useState(null),[n,a]=o.useState(!0),[u,l]=o.useState(null);o.useEffect(()=>{(async()=>{try{if(v.isAuthenticated()){const i=await v.verifyToken();r(i)}}catch{v.logout()}finally{a(!1)}})()},[]);const h=async c=>{try{l(null),a(!0);const i=await v.login(c);console.log("Login response:",i),r(i.user),console.log("User set:",i.user)}catch(i){throw console.error("Login error:",i),l(i.message||"Erreur de connexion"),i}finally{a(!1)}},d=()=>{v.logout(),r(null)},x=async()=>{try{await v.updateFirstLogin(),t&&r({...t,firstLogin:!1})}catch(c){console.error("Erreur mise Ã  jour premiÃ¨re connexion:",c)}},p=async()=>{try{const c=await v.verifyToken();r(c)}catch(c){console.error("Erreur rafraÃ®chissement utilisateur:",c)}},m={user:t,isLoading:n,isAuthenticated:!!t,isAdmin:t?.role==="admin",login:h,logout:d,updateFirstLogin:x,refreshUser:p,error:u};return e.jsx(q.Provider,{value:m,children:s})},T=()=>{const s=o.useContext(q);if(s===void 0)throw new Error("useAuth doit Ãªtre utilisÃ© dans un AuthProvider");return s};function ue({onBack:s}){return e.jsx("div",{className:"discover-screen",children:e.jsxs("div",{className:"discover-container",children:[e.jsxs("button",{onClick:s,className:"back-button-discover",children:[e.jsx(D,{size:20}),"Retour"]}),e.jsx("img",{className:"discover-logo",alt:"Logo LibertyLoc",src:"./logo-liberty-loc-1-1.png"}),e.jsx("h1",{className:"discover-title",children:"RÃ©ussis ton permis bateau avec LibertyLoc"}),e.jsxs("div",{className:"discover-content",children:[e.jsxs("section",{className:"discover-section",children:[e.jsx("h2",{children:"ðŸŽ¯ Ton partenaire de rÃ©vision"}),e.jsx("p",{children:"LibertyLoc est une application de rÃ©vision moderne et interactive, spÃ©cialement conÃ§ue pour t'aider Ã  prÃ©parer ton permis bateau cÃ´tier avec confiance."})]}),e.jsxs("section",{className:"discover-section",children:[e.jsx("h2",{children:"ðŸ’¡ Ce que tu vas trouver"}),e.jsxs("ul",{className:"discover-list",children:[e.jsx("li",{children:"âœ… Des questions par thÃ©matique pour rÃ©viser Ã  ton rythme"}),e.jsx("li",{children:"âœ… Des examens blancs pour te mettre en conditions rÃ©elles"}),e.jsx("li",{children:"âœ… Un suivi de ta progression pour mesurer tes progrÃ¨s"}),e.jsx("li",{children:"âœ… Un accÃ¨s mobile pour rÃ©viser partout, Ã  tout moment"})]})]}),e.jsxs("section",{className:"discover-section",children:[e.jsx("h2",{children:"ðŸŽ“ Apprendre avec un professionnel"}),e.jsx("p",{children:"Cette application a Ã©tÃ© dÃ©veloppÃ©e pour accompagner les formations dispensÃ©es par JoÃ«l Gual, formateur certifiÃ© et passionnÃ© de nautisme."})]}),e.jsxs("div",{className:"contact-section",children:[e.jsx("h2",{children:"ðŸ“ž Contactez votre formateur"}),e.jsxs("div",{className:"contact-card",children:[e.jsx("div",{className:"contact-header",children:e.jsx("h3",{children:"JoÃ«l Gual - LibertyLoc"})}),e.jsxs("div",{className:"contact-info",children:[e.jsxs("a",{href:"https://libertyloc.fr",target:"_blank",rel:"noopener noreferrer",className:"contact-item contact-link",children:[e.jsx(K,{size:20}),e.jsx("span",{children:"libertyloc.fr"})]}),e.jsxs("a",{href:"tel:+33619132592",className:"contact-item contact-link",children:[e.jsx(H,{size:20}),e.jsx("span",{children:"06 19 13 25 92"})]}),e.jsxs("a",{href:"mailto:joel.gual@liberty-loc.com",className:"contact-item contact-link",children:[e.jsx(I,{size:20}),e.jsx("span",{children:"joel.gual@liberty-loc.com"})]}),e.jsxs("div",{className:"contact-item",children:[e.jsx(X,{size:20}),e.jsxs("span",{children:["22 Bis Avenue Augustin Labouilhe",e.jsx("br",{}),"31650 Saint-Orens-de-Gameville"]})]})]}),e.jsx("a",{href:"https://libertyloc.fr",target:"_blank",rel:"noopener noreferrer",className:"visit-website-button",children:"Visiter le site web"})]})]}),e.jsxs("div",{className:"discover-cta",children:[e.jsx("p",{className:"cta-text",children:"PrÃªt Ã  commencer ton aventure nautique ?"}),e.jsx("p",{className:"cta-subtext",children:"Contacte JoÃ«l pour en savoir plus sur les formations et obtenir tes accÃ¨s !"})]})]})]})})}class me{async requestPasswordReset(t){const{data:r}=await j.post("/auth/request-reset",{email:t});if(!r.success)throw new Error(r.message||"Erreur lors de la demande de rÃ©initialisation");return r}async verifyResetCode(t,r){const{data:n}=await j.post("/auth/verify-reset-code",{email:t,code:r});if(!n.success)throw new Error(n.message||"Code invalide ou expirÃ©");return n}async resetPassword(t,r,n){const{data:a}=await j.post("/auth/reset-password",{email:t,code:r,newPassword:n});if(!a.success)throw new Error(a.message||"Erreur lors de la rÃ©initialisation du mot de passe");return a}}const A=new me;function he({onBack:s,initialEmail:t=""}){const[r,n]=o.useState("request"),[a,u]=o.useState(t),[l,h]=o.useState(""),[d,x]=o.useState(""),[p,m]=o.useState(""),[c,i]=o.useState(!1),[b,f]=o.useState(null),[C,S]=o.useState(null),B=async g=>{if(g.preventDefault(),f(null),S(null),!a){f("Veuillez entrer votre adresse email");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)){f("Adresse email invalide");return}try{i(!0);const P=await A.requestPasswordReset(a);S(P.message),n("verify")}catch(P){f(P.message||"Erreur lors de l'envoi du code")}finally{i(!1)}},J=async g=>{if(g.preventDefault(),f(null),!l){f("Veuillez entrer le code reÃ§u par email");return}if(l.length!==6||!/^\d+$/.test(l)){f("Le code doit Ãªtre composÃ© de 6 chiffres");return}try{i(!0),await A.verifyResetCode(a,l),n("reset")}catch(w){f(w.message||"Code invalide ou expirÃ©")}finally{i(!1)}},G=async g=>{if(g.preventDefault(),f(null),!d||!p){f("Veuillez remplir tous les champs");return}if(d.length<6){f("Le mot de passe doit contenir au moins 6 caractÃ¨res");return}if(d!==p){f("Les mots de passe ne correspondent pas");return}try{i(!0);const w=await A.resetPassword(a,l,d);S(w.message),n("success")}catch(w){f(w.message||"Erreur lors de la rÃ©initialisation")}finally{i(!1)}},W=()=>{n("request"),h(""),x(""),m(""),f(null),S(null)};return e.jsx("div",{className:"forgot-password-screen",children:e.jsxs("div",{className:"forgot-password-container",children:[e.jsxs("button",{type:"button",onClick:s,className:"back-button",children:[e.jsx(D,{size:20}),"Retour Ã  la connexion"]}),r==="request"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"step-header",children:[e.jsx(I,{className:"step-icon",size:48}),e.jsx("h1",{children:"RÃ©initialiser votre mot de passe"}),e.jsx("p",{children:"Entrez votre adresse email pour recevoir un code de vÃ©rification"})]}),e.jsxs("form",{onSubmit:B,className:"reset-form",children:[b&&e.jsxs("div",{className:"error-message",children:[e.jsx(y,{size:16}),e.jsx("span",{children:b})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Adresse email"}),e.jsx("input",{id:"email",type:"email",placeholder:"votre@email.com",value:a,onChange:g=>u(g.target.value),disabled:c,autoComplete:"email",className:"form-input"})]}),e.jsx("button",{type:"submit",disabled:c||!a,className:"submit-button",children:c?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"spinner",size:20}),"Envoi en cours..."]}):"Envoyer le code"})]})]}),r==="verify"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"step-header",children:[e.jsx(Q,{className:"step-icon",size:48}),e.jsx("h1",{children:"VÃ©rifiez votre email"}),e.jsxs("p",{children:["Un code Ã  6 chiffres a Ã©tÃ© envoyÃ© Ã  ",e.jsx("strong",{children:a})]})]}),C&&e.jsxs("div",{className:"success-message",children:[e.jsx(k,{size:16}),e.jsx("span",{children:C})]}),e.jsxs("form",{onSubmit:J,className:"reset-form",children:[b&&e.jsxs("div",{className:"error-message",children:[e.jsx(y,{size:16}),e.jsx("span",{children:b})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"code",className:"form-label",children:"Code de vÃ©rification"}),e.jsx("input",{id:"code",type:"text",placeholder:"123456",value:l,onChange:g=>h(g.target.value.replace(/\D/g,"").substring(0,6)),disabled:c,maxLength:6,className:"form-input code-input"})]}),e.jsx("button",{type:"submit",disabled:c||l.length!==6,className:"submit-button",children:c?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"spinner",size:20}),"VÃ©rification..."]}):"VÃ©rifier le code"}),e.jsx("button",{type:"button",onClick:W,className:"link-button",children:"Changer d'adresse email"})]})]}),r==="reset"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"step-header",children:[e.jsx(F,{className:"step-icon",size:48}),e.jsx("h1",{children:"Nouveau mot de passe"}),e.jsxs("p",{children:["Votre code a Ã©tÃ© vÃ©rifiÃ© pour ",e.jsx("strong",{children:a})]})]}),e.jsxs("form",{onSubmit:G,className:"reset-form",children:[b&&e.jsxs("div",{className:"error-message",children:[e.jsx(y,{size:16}),e.jsx("span",{children:b})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"new-password",className:"form-label",children:"Nouveau mot de passe"}),e.jsx("input",{id:"new-password",type:"password",placeholder:"Au moins 6 caractÃ¨res",value:d,onChange:g=>x(g.target.value),disabled:c,className:"form-input",minLength:6})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirm-password",className:"form-label",children:"Confirmez le mot de passe"}),e.jsx("input",{id:"confirm-password",type:"password",placeholder:"RÃ©pÃ©tez le mot de passe",value:p,onChange:g=>m(g.target.value),disabled:c,className:"form-input",minLength:6})]}),e.jsx("button",{type:"submit",disabled:c||!d||!p,className:"submit-button",children:c?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"spinner",size:20}),"RÃ©initialisation..."]}):"RÃ©initialiser le mot de passe"})]})]}),r==="success"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"step-header success",children:[e.jsx(k,{className:"step-icon success",size:48}),e.jsx("h1",{children:"Mot de passe modifiÃ© !"}),e.jsx("p",{children:"Votre mot de passe a Ã©tÃ© rÃ©initialisÃ© avec succÃ¨s."})]}),C&&e.jsxs("div",{className:"success-message",children:[e.jsx(k,{size:16}),e.jsx("span",{children:C})]}),e.jsx("button",{type:"button",onClick:s,className:"submit-button",children:"Retour Ã  la connexion"})]})]})})}function pe(){const{login:s}=T(),[t,r]=o.useState(""),[n,a]=o.useState(""),[u,l]=o.useState(!1),[h,d]=o.useState(null),[x,p]=o.useState("welcome"),m=async c=>{if(c.preventDefault(),d(null),!t||!n){d("Veuillez remplir tous les champs");return}try{l(!0),await s({email:t,password:n})}catch(i){i.error==="ACCOUNT_EXPIRED"||i.message?.includes("expirÃ©")?d("Votre compte a expirÃ©. Veuillez contacter l'administrateur pour renouveler votre accÃ¨s."):d(i.message||"Email ou mot de passe incorrect")}finally{l(!1)}};return x==="discover"?e.jsx(ue,{onBack:()=>p("welcome")}):x==="forgot-password"?e.jsx(he,{onBack:()=>p("login"),initialEmail:t}):x==="welcome"?e.jsxs("div",{className:"login-welcome-screen",children:[e.jsx("img",{className:"welcome-logo",alt:"Logo LibertyLoc",src:"./logo-liberty-loc-1-1.png"}),e.jsxs("p",{className:"welcome-text",children:[e.jsxs("span",{className:"welcome-title",children:["Bienvenue sur LibertyLoc",e.jsx("br",{})]}),e.jsx("span",{className:"welcome-subtitle",children:"L'application qui t'accompagne pour ton permis bateau"})]}),e.jsx("button",{className:"welcome-button discover-button",onClick:()=>p("discover"),children:"DÃ©couvrir l'app"}),e.jsx("button",{className:"welcome-button login-button",onClick:()=>p("login"),children:"Se connecter"})]}):e.jsx("div",{className:"login-screen",children:e.jsxs("div",{className:"login-container",children:[e.jsx("img",{className:"login-logo",alt:"Logo LibertyLoc",src:"./logo-liberty-loc-1-1.png"}),e.jsx("h1",{className:"login-title",children:"Se connecter"}),e.jsxs("form",{onSubmit:m,className:"login-form",children:[h&&e.jsxs("div",{className:"login-error",children:[e.jsx(y,{size:16}),e.jsx("span",{children:h})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{id:"email",type:"email",placeholder:"exemple@email.com",value:t,onChange:c=>r(c.target.value),disabled:u,autoComplete:"email",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Mot de passe"}),e.jsx("input",{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:n,onChange:c=>a(c.target.value),disabled:u,autoComplete:"current-password",className:"form-input"})]}),e.jsx("button",{type:"submit",disabled:u,className:"submit-button",children:u?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"spinner",size:20}),"Connexion..."]}):"Se connecter"}),e.jsx("button",{type:"button",onClick:()=>p("forgot-password"),className:"forgot-password-link",children:"Mot de passe oubliÃ© ?"}),e.jsx("button",{type:"button",onClick:()=>p("welcome"),className:"back-button",children:"Retour"})]})]})})}const xe=Y("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function fe({className:s,variant:t,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:U(xe({variant:t}),s),...r})}function ge({className:s,...t}){return e.jsx("div",{"data-slot":"alert-description",className:U("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...t})}function je({email:s,onPasswordChanged:t}){const[r,n]=o.useState(""),[a,u]=o.useState(""),[l,h]=o.useState(""),[d,x]=o.useState(!1),[p,m]=o.useState(null),c=async i=>{if(i.preventDefault(),m(null),!r||!a||!l){m("Veuillez remplir tous les champs");return}if(a.length<6){m("Le nouveau mot de passe doit contenir au moins 6 caractÃ¨res");return}if(a!==l){m("Les mots de passe ne correspondent pas");return}if(r===a){m("Le nouveau mot de passe doit Ãªtre diffÃ©rent de l'ancien");return}try{x(!0),await v.changePassword({currentPassword:r,newPassword:a}),await v.updateFirstLogin(),t()}catch(b){m(b.message||"Erreur lors du changement de mot de passe")}finally{x(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 p-4",children:e.jsxs(Z,{className:"w-full max-w-md",children:[e.jsxs(ee,{className:"space-y-1 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(F,{className:"w-8 h-8 text-white"})}),e.jsx(se,{className:"text-2xl font-bold",children:"Changement de mot de passe requis"}),e.jsx(te,{children:"C'est votre premiÃ¨re connexion. Veuillez dÃ©finir un nouveau mot de passe pour sÃ©curiser votre compte."})]}),e.jsx(re,{children:e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[p&&e.jsxs(fe,{variant:"destructive",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx(ge,{children:p})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"email",children:"Email (non modifiable)"}),e.jsx(E,{id:"email",type:"email",value:s,disabled:!0,className:"bg-gray-100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),e.jsx(E,{id:"currentPassword",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:r,onChange:i=>n(i.target.value),disabled:d,autoComplete:"current-password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),e.jsx(E,{id:"newPassword",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:a,onChange:i=>u(i.target.value),disabled:d,autoComplete:"new-password"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Minimum 6 caractÃ¨res"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),e.jsx(E,{id:"confirmPassword",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:l,onChange:i=>h(i.target.value),disabled:d,autoComplete:"new-password"})]}),e.jsx(ae,{type:"submit",className:"w-full",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),"Modification en cours..."]}):"Changer le mot de passe"})]})})]})})}const ve=()=>{console.log("ðŸ”¥ Mode Backend: localStorage non initialisÃ© avec des donnÃ©es mockÃ©es")},be=o.lazy(()=>O(()=>import("./StudentDashboard-CP0T31it.js"),__vite__mapDeps([0,1,2,3,4])).then(s=>({default:s.StudentDashboard}))),we=o.lazy(()=>O(()=>import("./AdminDashboard-hIJIKb87.js"),__vite__mapDeps([5,1,2,3])).then(s=>({default:s.AdminDashboard}))),R=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]})});function ye(){const{user:s,logout:t,isLoading:r,refreshUser:n}=T();return o.useEffect(()=>{ve()},[]),r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]})}):s?s.firstLogin===!0||s.firstLogin===1?e.jsx(je,{email:s.email,onPasswordChanged:n}):s.role==="admin"?e.jsx(o.Suspense,{fallback:e.jsx(R,{}),children:e.jsx(we,{user:s,onLogout:t})}):e.jsx(o.Suspense,{fallback:e.jsx(R,{}),children:e.jsx(be,{user:s,onLogout:t})}):e.jsx(pe,{})}const $=o.createContext(void 0);function Ne({children:s}){const[t,r]=o.useState(()=>{const a=localStorage.getItem("darkMode");return a?JSON.parse(a):!1});o.useEffect(()=>{t?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),localStorage.setItem("darkMode",JSON.stringify(t))},[t]);const n=()=>{r(a=>!a)};return e.jsx($.Provider,{value:{isDarkMode:t,toggleDarkMode:n},children:s})}function Ee(){const s=o.useContext($);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s}M(document.getElementById("root")).render(e.jsx(Ne,{children:e.jsx(de,{children:e.jsx(ye,{})})}));export{fe as A,Le as M,j as a,ge as b,Ee as c,v as d,T as u};
